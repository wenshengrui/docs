第三章 网站发布

一、网站发布的步骤：

本地测试(开发工程师) ----> 本地测试(测试工程师) ----> 预发布测试(开发工程师与测试工程师) ----> 在线正式测试(所有人员)

预发布服务器与正式服务器的不同之处：预发布服务器没有配置在负载均衡服务器上，外部用户无法访问。

二、代码控制
1、SVN版本控制
(1) 主干开发，分支发布：主干代码反应目前整个应用的状态，一目了然，便于控制与管理，也利于持续集成。

(2) 分支开发，主干发布：各分支独立进行，互不干扰，可以使不同发布周期的开发在同一应用中进行。（最常用方式）

2. Git版本控制

三、自动化发布：网站火车发布模型

四、灰度发布：
将集群服务器分成若干部分，每天只发布一部分服务器，观察运行没有故障，第二天再发布一部分服务器，持续把整个集群全部发布完毕，如果出现问题，只需要回滚已发布的一部分服务器，使系统复原，消除故障。

五、网站运行监控

六、监控数据采集
1、用户行为日志收集
(1)服务端日志收集(web服务器日志)
(2)客户端浏览器日志收集(主要是JavaScript实现)
Storm 日志统计与分析工具

2、服务器性能监控(开源的性能监控工具 Ganglia)
Ganglia是一个开源集群监视项目，设计用于测量数以千计的节点。Ganglia的核心包含gmond、gmetad以及一个Web前端。主要是用来监控系统性能，如：cpu 、mem、硬盘利用率， I/O负载、网络流量情况等，通过曲线很容易见到每个节点的工作状态，对合理调整、分配系统资源，提高系统整体性能起到重要作用。

3、运行数据报告