
1. mysql 导出数据

(1)第一种方法 ( 注：尽量不要用以下语句执行 )
use dbname; 
select * into outfile '/tmp/role_data.csv' character set gbk fields terminated by ',' optionally enclosed by '"' lines terminated by '\n' from table_name;

(1)第二种方法
/usr/local/mysql/bin/mysqldump -h127.0.0.1 -uroot -p dbname table_name --skip-lock-tables > /home/wenshengrui/table_name.sql

数据总数算法：
select sum(tmpcount) from ( 
select SUM(money) as tmpcount FROM `sbk_user_pay_101` 
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_102`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_103`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_201`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_202`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_203`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_204`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_301`
union all 
select SUM(money) as tmpcount FROM `sbk_user_pay_302`
) a

Linux access 日志分析 

统计某个字段的总数 money
[root@localhost home]# egrep 'money' sbk.log.baidu-mgame.com.access.log |  egrep -o 'money=[0-9]+'|awk -F '=' '{sum+=$2}END{print sum}'


统计 uid=& 的总数
[root@localhost home]# egrep 'uid=&' sbk.log.baidu-mgame.com.access.log | egrep -o 'money=.........' -c -n

打印 uid=& 的所有数据
[root@localhost home]# egrep 'uid=&' sbk.log.baidu-mgame.com.access.log | egrep -o 'money=.........'

[root@localhost home]# egrep 'uid=&' sbk.log.baidu-mgame.com.access.log | egrep 'third_type=.........' | sort -c -n

[root@localhost home]# grep -rn "userpaydeal.php" sbk.log.baidu-mgame.com.access.log

[root@localhost home]# grep -rn " /userpaydeal.php HTTP/1.1\" 200" sbk.log.baidu-mgame.com.access.log

[root@localhost home]# cat /home/baidu-mgame.com.access.log | awk '{print $16}' | sort | uniq -c | sort -nr | head -10

[root@localhost home]# cat sbk.log.baidu-mgame.com.access.log | awk '{print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11}' | sort | uniq -c | sort -nr | head -10

[root@localhost home]# sed -n '508606,758467{p}' sbk.log.baidu-mgame.com.access.log.215 | egrep  '/userlogindeal.php' >after1.37.login.txt


